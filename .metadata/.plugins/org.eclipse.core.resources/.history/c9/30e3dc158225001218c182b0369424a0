package com.example.cameratest;

import android.hardware.*;
import android.hardware.Camera.*;

public class CameraPreviewProcessing implements PreviewCallback {
	private long timeStamp = 0;
	private FrameProcessedListener mListener;
	private Camera mCamera;
	
	public CameraPreviewProcessing(FrameProcessedListener listener) {
		this.mListener = listener;
	}
	
	public void onPreviewFrame(byte[] data, Camera camera) {
		long newTimeStamp = System.currentTimeMillis();
		mCamera.addCallbackBuffer(data);
		mListener.onFrameProcessed(newTimeStamp - timeStamp);
		timeStamp = newTimeStamp;
	}
}
